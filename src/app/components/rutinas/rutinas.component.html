  <div class="main-container">
    
    <header class="header">
      <h1>Rutinas Guiadas</h1>
      <p class="subtitle">PequeÃ±os pasos para recuperar tu equilibrio.</p>
    </header>

    <main class="content">

      <div class="routines-grid">
        <div *ngFor="let rutina of rutinas" 
            class="glass-card routine-card" 
            (click)="iniciarRutina(rutina)">
          
          <div class="icon-badge">{{ rutina.icono }}</div>
          
          <div class="card-content">
            <h3>{{ rutina.titulo }}</h3>
            <p class="desc">{{ rutina.descripcion }}</p>
            
            <div class="meta">
              <span class="tag">â± {{ rutina.duracionTotal }} min</span>
              <span class="tag">{{ rutina.pasos.length }} Pasos</span>
            </div>
          </div>

          <button class="play-btn">â–¶</button>
        </div>
      </div>

    </main>

    <div class="routine-player" *ngIf="rutinaActiva">
      
      <div class="progress-header">
        <button class="close-btn" (click)="cerrarRutina()">âœ•</button>
        <div class="progress-track">
          <div class="progress-fill" [style.width.%]="progresoPorcentaje"></div>
        </div>
        <span class="step-counter">{{ pasoActual + 1 }}/{{ rutinaActiva.pasos.length }}</span>
      </div>

      <div class="step-content animated-fade">
        <div class="step-icon">{{ rutinaActiva.pasos[pasoActual].icono }}</div>
        <h2>{{ rutinaActiva.pasos[pasoActual].titulo }}</h2>
        <p class="step-instruction">{{ rutinaActiva.pasos[pasoActual].instruccion }}</p>
        
        <div class="timer-hint" *ngIf="rutinaActiva.pasos[pasoActual].duracionSeg">
          â³ DuraciÃ³n sugerida: {{ rutinaActiva.pasos[pasoActual].duracionSeg }} seg
        </div>
      </div>

      <div class="player-controls">
        <button class="control-btn secondary" (click)="pasoAnterior()" [disabled]="pasoActual === 0">
          â† AtrÃ¡s
        </button>
        
        <button class="control-btn primary" (click)="siguientePaso()">
          {{ pasoActual === rutinaActiva.pasos.length - 1 ? 'Finalizar âœ¨' : 'Siguiente âœ' }}
        </button>
      </div>

    </div>

    <div class="celebration-overlay" *ngIf="rutinaCompletada">
      <div class="glass-card celebration-card">
        <span class="confetti">âœ¨ğŸ§˜âœ¨</span>
        <h2>Â¡Rutina Completada!</h2>
        <p>Te has regalado un momento importante para ti.</p>
        <button class="primary-btn" (click)="finalizarTodo()">Volver al menÃº</button>
      </div>
    </div>

    <div class="spacer"></div>

    <nav class="bottom-nav">
    
      <a routerLink="/meditaciones" routerLinkActive="active" class="nav-item">
        <span class="nav-icon">ğŸ§˜</span> <span class="nav-label">Meditar</span>
      </a>
      <a routerLink="/rutinas" routerLinkActive="active" class="nav-item">
        <span class="nav-icon">ğŸƒ</span> <span class="nav-label">Rutinas</span>
      </a>
        <a routerLink="/agenda" routerLinkActive="active" class="nav-item">
        <span class="nav-icon">ğŸ“…</span> <span class="nav-label">Agenda</span>
      </a>
      <a routerLink="/perfil" routerLinkActive="active" class="nav-item">
        <span class="nav-icon">ğŸ‘¤</span> <span class="nav-label">Perfil</span>
      </a>
    </nav>

  </div>