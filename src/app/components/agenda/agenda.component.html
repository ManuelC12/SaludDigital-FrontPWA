<div class="agenda-wrapper">
  
  <header class="header">
    <h1>Mi Diario</h1>
    <span class="subtitle">Registro emocional y fÃ­sico</span>
  </header>

  <div class="content">
    <form #agendaForm="ngForm" (ngSubmit)="agendaForm.form.valid && saveEntry(agendaForm)" novalidate>
      
      <div class="layout-grid">
        
        <div class="glass-card input-section">
          <h3 class="section-title-card">ğŸ“ Detalles</h3>
          
          <div class="input-group">
            <label for="dateEntry">Fecha</label>
            <input type="date" id="dateEntry" name="dateEntry" [(ngModel)]="fechaHoy" required>
          </div>

          <div class="input-group">
            <label for="subject">TÃ­tulo del dÃ­a</label>
            <input type="text" id="subject" name="subject" placeholder="Ej: Un dÃ­a difÃ­cil..." ngModel required minlength="3">
          </div>

          <div class="input-group">
            <label for="reflection">ReflexiÃ³n / Desahogo</label>
            <textarea id="reflection" name="reflection" rows="3" placeholder="Â¿QuÃ© tienes en mente hoy?" ngModel></textarea>
          </div>
        </div>

        <div class="glass-card mood-section">
          <h3 class="section-title-card">âœ¨ Â¿CÃ³mo te sientes?</h3>
          
          <div class="mood-options grid-2-col">
            
            <input type="radio" id="m-neutral" name="mood" value="neutral" ngModel required>
            <label for="m-neutral" class="mood-item"><span class="emoji">ğŸ˜</span> Neutro</label>

            <input type="radio" id="m-tired" name="mood" value="tired" ngModel required>
            <label for="m-tired" class="mood-item"><span class="emoji">ğŸ˜«</span> Agotado</label>

            <input type="radio" id="m-sad" name="mood" value="sad" ngModel required>
            <label for="m-sad" class="mood-item"><span class="emoji">ğŸ˜”</span> Triste</label>

            <input type="radio" id="m-anxious" name="mood" value="anxious" ngModel required>
            <label for="m-anxious" class="mood-item"><span class="emoji">ğŸ˜°</span> Ansioso</label>

            <input type="radio" id="m-lonely" name="mood" value="lonely" ngModel required>
            <label for="m-lonely" class="mood-item"><span class="emoji">ğŸ¥º</span> Solo/a</label>

            <input type="radio" id="m-angry" name="mood" value="angry" ngModel required>
            <label for="m-angry" class="mood-item"><span class="emoji">ğŸ˜ </span> Irritado</label>

            <input type="radio" id="m-apathetic" name="mood" value="apathetic" ngModel required>
            <label for="m-apathetic" class="mood-item"><span class="emoji">ğŸ˜</span> Desmotivado</label>

            <input type="radio" id="m-overwhelmed" name="mood" value="overwhelmed" ngModel required>
            <label for="m-overwhelmed" class="mood-item"><span class="emoji">ğŸ˜µ</span> Abrumado</label>

          </div>

          <div class="physical-row">
            <div class="input-group small">
              <label>ğŸ˜´ SueÃ±o (h)</label>
              <input type="number" name="sleepHours" ngModel placeholder="0" min="0" max="24">
            </div>
            <div class="input-group small">
              <label>ğŸ’§ Agua (vasos)</label>
              <input type="number" name="waterGlasses" ngModel placeholder="0" min="0">
            </div>
          </div>
        </div>

        <div class="glass-card full-width">
          <h3 class="section-title-card">ğŸ™ Gratitud</h3>
          <div class="input-group">
            <label for="gratitude">Hoy agradezco por...</label>
            <input type="text" id="gratitude" name="gratitude" placeholder="Algo pequeÃ±o..." ngModel>
          </div>
        </div>

      </div>

      <div class="actions">
        <button type="submit" class="save-btn" [disabled]="!agendaForm.valid">
          <span class="icon">ğŸ’¾</span> Guardar Registro
        </button>
      </div>

    </form>

    <div class="history-section">
      <h2 class="history-title">ğŸ“… Historial</h2>
      
      <div *ngIf="entries.length === 0" class="empty-state glass-card">
        <p>AÃºn no has escrito nada.</p>
        <span>Tu historia comienza hoy. âœï¸</span>
      </div>

      <div class="history-list" *ngIf="entries.length > 0">
        <div *ngFor="let entry of entries" class="glass-card history-item animated-fade">
          <div class="history-header">
            <span class="date">{{ entry.date | date:'dd/MM/yyyy' }}</span>
            <span class="mood-badge">{{ getMoodEmoji(entry.mood) }}</span>
          </div>
          <h4>{{ entry.subject }}</h4>
          <p class="reflection-text" *ngIf="entry.reflection">"{{ entry.reflection }}"</p>
          
          <div class="footer-stats">
            <span *ngIf="entry.gratitude">ğŸ™: {{ entry.gratitude }}</span>
            <span *ngIf="entry.sleepHours">ğŸ˜´: {{ entry.sleepHours }}h</span>
            <button class="delete-btn" (click)="deleteEntry(entry.id)">ğŸ—‘ï¸</button>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div class="spacer"></div>

  <nav class="bottom-nav">

    <a routerLink="/meditaciones" routerLinkActive="active" class="nav-item">
      <span class="nav-icon">ğŸ§˜</span> <span class="nav-label">Meditar</span>
    </a>
    <a routerLink="/rutinas" routerLinkActive="active" class="nav-item">
      <span class="nav-icon">ğŸƒ</span> <span class="nav-label">Rutinas</span>
    </a>
    <a routerLink="/agenda" routerLinkActive="active" class="nav-item">
      <span class="nav-icon">ğŸ“…</span> <span class="nav-label">Agenda</span>
    </a>
    <a routerLink="/perfil" routerLinkActive="active" class="nav-item">
      <span class="nav-icon">ğŸ‘¤</span> <span class="nav-label">Perfil</span>
    </a>
  </nav>

</div>